exports.ids=[2],exports.modules={86:function(t,e,o){"use strict";var l=o(4),r=o.n(l),c={async post(t,data){t="http://127.0.0.1:10012"+t,console.log("axios url: ",t);let e=await r.a.post(t,data);return console.log("axios status: ",e.status),e.data}};e.a={getTemplates:async()=>await c.post("/api/templates"),getTemplateInfo:async(data={})=>await c.post("/api/template/info",{name:data.name}),getCategoryData:async(data={})=>await c.post("/api/website/info/getDataList",{category:data.category}),getDocumentData:async(data={})=>await c.post("/api/website/info/getDataList",{category:"document",type:data.type||"config",page:data.page||1,limit:data.limit||0,pid:data.pid}),websiteDataCreate:async(data={})=>await c.post("/api/website/admin/dataCreate",data),websiteDataUpdate:async(data={})=>await c.post("/api/website/admin/dataUpdate",data)}},87:function(t,e,o){"use strict";o.r(e);var l=o(86),r={data:()=>({dialogVisible:!1,redirectValue:[0,1],formRules:{title:[{required:!0,message:"请输入栏目标题",trigger:"blur"},{min:1,max:8,message:"长度在 1 到 8 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入栏目标识",trigger:"blur"},{min:1,max:16,message:"长度在 1 到 16 个字符",trigger:"blur"}]},categoryData:{id:0,pid:0,name:"",title:"",description:"",sort:0,seo_title:"",seo_keywords:"",seo_description:"",template:"",template_article:"",page_limit:0,is_redirect:0},categorys:[],templatesCategory:[],templatesArticle:[]}),computed:{},async fetch({store:t,params:e}){let o=await l.a.getCategoryData({category:"category"});console.log("fetch getCategoryData categoryRet:",o),t.commit("categorysSet",o.data.rows||[]);let r=await l.a.getTemplates();console.log("fetch getTemplates templatesRet:",r),t.commit("templatesSet",r.data),t.commit("subNavIndexSet","1")},methods:{initPidCategorys(t=0){let e=this.$store.state.categorys;this.categorys=[{id:0,name:"",title:"顶级栏目",html:""}],e.forEach(e=>{let data={id:e.id,name:e.name,title:e.title,html:e.html};e.id===t&&0!==t&&(data.disabled=!0),this.categorys.push(data)})},categoryAddBtnClick(){let t=this.$store.state.templates;console.log("methods categoryAddBtnClick templates:",t),this.templatesCategory=t.category,this.templatesArticle=t.article,this.initPidCategorys(),this.categoryData={id:0,pid:"",name:"",title:"",description:"",sort:0,seo_title:"",seo_keywords:"",seo_description:"",template:"",template_article:"",status:1,page_limit:0,is_redirect:0},this.dialogVisible=!0},categoryUpdateBtnClick(data){console.log("ethods categoryUpdateBtnClick data:",data),Object.keys(this.categoryData).forEach(t=>{data.hasOwnProperty(t)&&(this.categoryData[t]=data[t])});let t=this.$store.state.templates;console.log("methods categoryUpdateBtnClick templates:",t),this.templatesCategory=t.category,this.templatesArticle=t.article,this.initPidCategorys(data.id),this.dialogVisible=!0},async categroyUpdate(){let t=this.categoryData;t.category="category",console.log("categroyUpdate categoryData:",t);let e=await this.formValidata("formCategory");if(console.log("categroyUpdate valid:",e),e)if(t.id){let e=await l.a.websiteDataUpdate(t);console.log("methods categroyUpdate websiteDataUpdate ret: ",e),0===e.code?(await this.categorysReload(),this.dialogVisible=!1):this.$message.error(e.message||"error")}else{let e=await l.a.websiteDataCreate(t);console.log("methods categroyUpdate websiteDataCreate ret: ",e),0===e.code?(await this.categorysReload(),this.dialogVisible=!1):this.$message.error(e.message||"error")}},async categorysReload(){let t=await l.a.getCategoryData({category:"category"});return console.log("method getCategoryData ret:",t),await this.$store.commit("categorysSet",t.data.rows||[]),!0},formValidata(t){let e=this.$refs[t];return new Promise((t,o)=>{e.validate(e=>{t(!!e)})})},async categoryStatusUpdate(data,t=0){let e={};(e=Object.assign({},e,data)).status=t;let o=await l.a.websiteDataUpdate(e);console.log("methods categoryStatusUpdate websiteDataUpdate ret: ",o),0===o.code?await this.categorysReload():this.$message.error(o.message||"error")}}},c=o(5),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t._ssrNode('<div class="text-4xl p-4 border-b">',"</div>",[t._ssrNode("\n    网站栏目\n    "),o("el-button",{staticClass:"float-right",attrs:{type:"primary",size:"small"},on:{click:t.categoryAddBtnClick}},[t._v("添加栏目")])],2),t._ssrNode(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.$store.state.categorys,stripe:""}},[o("el-table-column",{attrs:{label:"栏目标题",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.html)+t._s(e.row.title))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"name",label:"标识"}}),t._v(" "),o("el-table-column",{attrs:{prop:"url",label:"URL"}}),t._v(" "),o("el-table-column",{attrs:{label:"页面模板",prop:"template"}}),t._v(" "),o("el-table-column",{attrs:{label:"跳转"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.is_redirect?[t._v("✔️")]:t._e()]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"sort",label:"排序",width:"50"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"状态",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?o("el-switch",{attrs:{value:!0,"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"正常","inactive-text":"禁用"},on:{change:function(o){return t.categoryStatusUpdate(e.row,0)}}}):t._e(),t._v(" "),0==e.row.status?o("el-switch",{attrs:{value:!1,"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"正常","inactive-text":"禁用"},on:{change:function(o){return t.categoryStatusUpdate(e.row,1)}}}):t._e()]}}])}),t._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){return t.categoryUpdateBtnClick(e.row)}}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){return t.categoryStatusUpdate(e.row,-1)}}},[t._v("删除")])]}}])}),t._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.template&&1!=e.row.is_redirect?[o("router-link",{staticClass:"text-blue-500",attrs:{to:{path:"/data",query:{id:e.row.id,template:e.row.template}}}},[t._v("栏目数据")])]:t._e()]}}])})],1),t._ssrNode(" "),o("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"70%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-form",{ref:"formCategory",attrs:{"label-width":"120px",model:t.categoryData,rules:t.formRules}},[o("el-form-item",{attrs:{label:"上级栏目"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.categoryData.pid,callback:function(e){t.$set(t.categoryData,"pid",e)},expression:"categoryData.pid"}},t._l(t.categorys,(function(t){return o("el-option",{key:t.id,attrs:{label:t.html+t.title,value:t.id,disabled:t.disabled}})})),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"栏目标题",prop:"title"}},[o("el-input",{attrs:{placeholder:"请输入栏目标题"},model:{value:t.categoryData.title,callback:function(e){t.$set(t.categoryData,"title",e)},expression:"categoryData.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"栏目标题",prop:"name"}},[o("el-input",{attrs:{placeholder:"请输入栏目标识"},model:{value:t.categoryData.name,callback:function(e){t.$set(t.categoryData,"name",e)},expression:"categoryData.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"栏目简述/副标题"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"栏目简述 or 副标题"},model:{value:t.categoryData.description,callback:function(e){t.$set(t.categoryData,"description",e)},expression:"categoryData.description"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"栏目排序"}},[o("el-input-number",{attrs:{min:0,max:1e4,placeholder:"越小越优先"},model:{value:t.categoryData.sort,callback:function(e){t.$set(t.categoryData,"sort",e)},expression:"categoryData.sort"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"是否跳转下一级"}},[o("el-radio",{attrs:{label:t.redirectValue[0]},model:{value:t.categoryData.is_redirect,callback:function(e){t.$set(t.categoryData,"is_redirect",e)},expression:"categoryData.is_redirect"}},[t._v("否")]),t._v(" "),o("el-radio",{attrs:{label:t.redirectValue[1]},model:{value:t.categoryData.is_redirect,callback:function(e){t.$set(t.categoryData,"is_redirect",e)},expression:"categoryData.is_redirect"}},[t._v("是")])],1),t._v(" "),o("el-divider"),t._v(" "),o("el-form-item",{attrs:{label:"栏目SEO标题"}},[o("el-input",{attrs:{placeholder:"请输入栏目SEO标题,默认使用标题"},model:{value:t.categoryData.seo_title,callback:function(e){t.$set(t.categoryData,"seo_title",e)},expression:"categoryData.seo_title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"栏目SEO关键字"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入栏目SEO关键字"},model:{value:t.categoryData.seo_keyword,callback:function(e){t.$set(t.categoryData,"seo_keyword",e)},expression:"categoryData.seo_keyword"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"栏目SEO描述"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入栏目SEO描述，默认使用栏目简述"},model:{value:t.categoryData.seo_description,callback:function(e){t.$set(t.categoryData,"seo_description",e)},expression:"categoryData.seo_description"}})],1),t._v(" "),o("el-divider"),t._v(" "),o("el-form-item",{attrs:{label:"栏目页模板"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.categoryData.template,callback:function(e){t.$set(t.categoryData,"template",e)},expression:"categoryData.template"}},t._l(t.templatesCategory,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"详情页模板"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.categoryData.template_article,callback:function(e){t.$set(t.categoryData,"template_article",e)},expression:"categoryData.template_article"}},t._l(t.templatesArticle,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"文章分页数目"}},[o("el-input-number",{attrs:{min:0,max:100,placeholder:"0为不分页"},model:{value:t.categoryData.page_limit,callback:function(e){t.$set(t.categoryData,"page_limit",e)},expression:"categoryData.page_limit"}})],1)],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.categroyUpdate}},[t._v("确 定")])],1)],1)],2)}),[],!1,null,null,"524cc4a4");e.default=component.exports}};